(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[291],{551:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vanilla-ghost",function(){return s(8629)}])},8629:function(e,n,s){"use strict";s.r(n),s.d(n,{__toc:function(){return o}});var i=s(5893),l=s(2673),t=s(3393),r=s(3257);s(7954);var a=s(2643);let o=[{depth:2,value:"Table of Contents",id:"table-of-contents"},{depth:2,value:"Dependencies",id:"dependencies"},{depth:2,value:"Local Development",id:"local-development"},{depth:3,value:"Get the code",id:"get-the-code"},{depth:4,value:"GitHub UI",id:"github-ui"},{depth:4,value:"GitHub CLI",id:"github-cli"},{depth:3,value:"Mailgun",id:"mailgun"},{depth:3,value:"Basics",id:"basics"},{depth:2,value:"Test Docker Build",id:"test-docker-build"},{depth:2,value:"Deploy to Fly.io",id:"deploy-to-flyio"},{depth:3,value:"Prerequisites",id:"prerequisites"},{depth:3,value:"GitHub Actions",id:"github-actions"},{depth:3,value:"Command Line",id:"command-line"},{depth:3,value:"Custom Domains and SSL",id:"custom-domains-and-ssl"}];function c(e){let n=Object.assign({h1:"h1",p:"p",a:"a",h2:"h2",ul:"ul",li:"li",h3:"h3",h4:"h4",code:"code",pre:"pre",span:"span",ol:"ol"},(0,a.a)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{children:"Ghost Easy Deploy"}),"\n",(0,i.jsx)(n.p,{children:"Easily deploy Ghost to Fly.io"}),"\n",(0,i.jsxs)(n.p,{children:["Find the code ",(0,i.jsx)(n.a,{href:"https://github.com/mikan-laboratory/ghost-easy-deploy",children:"here"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#Ghost-Easy-Deploy",children:"Ghost Easy Deploy"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#dependencies",children:"Dependencies"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#local-development",children:"Local Development"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#get-the-code",children:"Get the code"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#github-ui",children:"GitHub UI"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#github-cli",children:"GitHub CLI"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#mailgun",children:"Mailgun"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#basics",children:"Basics"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#test-docker-build",children:"Test Docker Build"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#deploy-to-flyio",children:"Deploy to Fly.io"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#github-actions",children:"GitHub Actions"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#command-line",children:"Command Line"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#custom-domains-and-ssl",children:"Custom Domains and SSL"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://www.npmjs.com/",children:"NPM"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://www.docker.com/",children:"Docker"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://tilt.dev/",children:"Tilt"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://fly.io/docs/flyctl/installing/",children:"flyctl"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"local-development",children:"Local Development"}),"\n",(0,i.jsx)(n.h3,{id:"get-the-code",children:"Get the code"}),"\n",(0,i.jsx)(n.p,{children:"Use the template to create your own repository."}),"\n",(0,i.jsx)(n.h4,{id:"github-ui",children:"GitHub UI"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Navigate to the ",(0,i.jsx)(n.a,{href:"https://github.com/mikan-laboratory/ghost-easy-deploy",children:"repository"}),", click ",(0,i.jsx)(n.code,{children:"Use this template"}),", and follow the instructions."]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"github-cli",children:"GitHub CLI"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Get the ",(0,i.jsx)(n.a,{href:"https://cli.github.com/",children:"GitHub CLI"})]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{"data-language":"bash","data-theme":"default",children:(0,i.jsxs)(n.code,{"data-language":"bash","data-theme":"default",children:[(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Step 1: Clone the template repository"})}),"\n",(0,i.jsx)(n.span,{className:"line",children:" "}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"git"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"clone"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"https://github.com/mikab-laboratory/ghost-easy-deploy.git"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"new-project"})]}),"\n",(0,i.jsx)(n.span,{className:"line",children:" "}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"cd"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"new-project"})]}),"\n",(0,i.jsx)(n.span,{className:"line",children:" "}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Step 2: Create a new repository on GitHub"})}),"\n",(0,i.jsx)(n.span,{className:"line",children:" "}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"gh"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"repo"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"create"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"username/new-project"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"--private"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"--source=."})]}),"\n",(0,i.jsx)(n.span,{className:"line",children:" "}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Step 3: Push the cloned contents to the new repository"})}),"\n",(0,i.jsx)(n.span,{className:"line",children:" "}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"git"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"push"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"--set-upstream"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"origin"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"main"})]})]})}),"\n",(0,i.jsx)(n.h3,{id:"mailgun",children:"Mailgun"}),"\n",(0,i.jsx)(n.p,{children:"You don't need Mailgun to get started, but you'll need for email-based workflows like member sign up."}),"\n",(0,i.jsx)(n.p,{children:"Don't worry about the $35 a month price tag, immediately after signing up for the trial, you can downgrade to the flex plan."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Create ",(0,i.jsx)(n.a,{href:"https://www.mailgun.com/",children:"Mailgun"})," account."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Navigate to Sending -> Domains. You should see a test domain that looks like ",(0,i.jsx)(n.code,{children:"sandbox1234567890abcdef1234567890ab.mailgun.org"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Add your email as an authorized recipient."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Scroll down and select API Keys. Create a new API key and copy the key."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Find the correct base URL ",(0,i.jsx)(n.a,{href:"https://documentation.mailgun.com/en/latest/api-intro.html#base-url",children:"here"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"basics",children:"Basics"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Create ",(0,i.jsx)(n.code,{children:".env"})," file in root directory, using ",(0,i.jsx)(n.code,{children:".env.example"})," as a template."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Use ",(0,i.jsx)(n.code,{children:"tilt up"})," to install dependencies, generate a prisma client, and start services."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Seed database with the button in Ghost section of the Tilt UI."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The production script seeds an owner and basic settings. The development script includes posts and comments."}),"\n",(0,i.jsx)(n.li,{children:"If you want to inspect the database, you can manually trigger a GUI from the Tilt UI."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The Node engine is set to 18.19 in package.json to match the production runtime. This follows the Ghost team's advice. You can find more information ",(0,i.jsx)(n.a,{href:"https://ghost.org/docs/faq/node-versions/#why-follow-lts",children:"here"}),". Using a different version locally shouldn't be an issue, but you will see a warning when you run ",(0,i.jsx)(n.code,{children:"npm install"}),". If you want to use this version in development, you can use a tool like ",(0,i.jsx)(n.a,{href:"https://github.com/nvm-sh/nvm?tab=readme-ov-file#install--update-script",children:"nvm"})," to manage multiple Node versions."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"test-docker-build",children:"Test Docker Build"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Build image and run container with ",(0,i.jsx)(n.code,{children:"make all"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Clean image and container with ",(0,i.jsx)(n.code,{children:"make clean-all"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"deploy-to-flyio",children:"Deploy to Fly.io"}),"\n",(0,i.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Create ",(0,i.jsx)(n.a,{href:"https://fly.io",children:"Fly.io"})," account."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Authenticate with ",(0,i.jsx)(n.code,{children:"flyctl auth login"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Create app with ",(0,i.jsx)(n.code,{children:"flyctl launch --no-deploy"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"github-actions",children:"GitHub Actions"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Navigate to the newly created application in the Fly.io dashboard and get a deploy token."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Set secrets in GitHub repository settings."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Manually trigger by going to Actions tab and selecting ",(0,i.jsx)(n.code,{children:"Fly Deploy"}),". Click ",(0,i.jsx)(n.code,{children:"Run workflow"})," and enter the branch name to deploy."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["You can update this action to trigger on push to ",(0,i.jsx)(n.code,{children:"main"})," by changing the ",(0,i.jsx)(n.code,{children:"on"})," section of the workflow file to ",(0,i.jsx)(n.code,{children:"push: [main]"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"command-line",children:"Command Line"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Set secrets"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{"data-language":"text","data-theme":"default",children:(0,i.jsxs)(n.code,{"data-language":"text","data-theme":"default",children:[(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'flyctl secrets set GHOST_CONTENT_API_KEY="my-api-key-value" \\'})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'   OWNER_EMAIL="my-email-value" \\'})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'   OWNER_PASSWORD="my-password-value" \\'})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'   MAILGUN_DOMAIN="somedomain" \\'})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'   MAILGUN_API_KEY="somekey" \\'})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'   MAILGUN_BASE_URL="mailgunbase" \\'})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'   JWT_SECRET="somejwtsecret" \\'})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'   SITE_TITLE="My Site" \\'})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'   SITE_DESCRIPTION="My website" \\'})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'   OWNER_NAME="Admin" \\'})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'   OWNER_SLUG="admin" \\'})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'   BLOG_URL="https://mysite.com" \\'})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'   COMMENT_SETTINGS="all"'})})]})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Deploy"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{"data-language":"text","data-theme":"default",children:(0,i.jsx)(n.code,{"data-language":"text","data-theme":"default",children:(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"flyctl deploy"})})})}),"\n",(0,i.jsx)(n.h3,{id:"custom-domains-and-ssl",children:"Custom Domains and SSL"}),"\n",(0,i.jsxs)(n.p,{children:["More details ",(0,i.jsx)(n.a,{href:"https://fly.io/docs/networking/custom-domains-with-fly/",children:"here"})]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["List your app ip addreses with ",(0,i.jsx)(n.code,{children:"flyctl ips list"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Create SSL certificates."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{"data-language":"text","data-theme":"default",children:(0,i.jsxs)(n.code,{"data-language":"text","data-theme":"default",children:[(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"flyctl certs create mysite.com"})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"flyctl certs create www.mysite.com"})})]})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsxs)(n.li,{children:["Use the ipv4 address to create an A record in your DNS provider, and the ipv6 address to create a AAAA record. Create a CNAME record for ",(0,i.jsx)(n.code,{children:"www"}),"."]}),"\n"]})]})}let h={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,a.a)(),e.components);return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)},pageOpts:{filePath:"pages/vanilla-ghost.mdx",route:"/vanilla-ghost",timestamp:1708265089e3,pageMap:[{kind:"Meta",data:{index:"Overview",features:"Features","local-development":"Quick Start",deployment:"Deployment",tips:"Tips","vanilla-ghost":"Vanilla Ghost"}},{kind:"MdxPage",name:"deployment",route:"/deployment"},{kind:"MdxPage",name:"features",route:"/features"},{kind:"MdxPage",name:"index",route:"/"},{kind:"MdxPage",name:"local-development",route:"/local-development"},{kind:"MdxPage",name:"tips",route:"/tips"},{kind:"MdxPage",name:"vanilla-ghost",route:"/vanilla-ghost"}],flexsearch:{codeblocks:!0},title:"Ghost Easy Deploy",headings:o},pageNextRoute:"/vanilla-ghost",nextraLayout:t.ZP,themeConfig:r.Z};n.default=(0,l.j)(h)},3257:function(e,n,s){"use strict";var i=s(5893);s(7294);let l={logo:(0,i.jsx)("span",{children:"Ghost Remix"}),project:{link:"https://github.com/mikan-laboratory/ghost-remix"},docsRepositoryBase:"https://github.com/mikan-laboratory/ghost-remix-docs",footer:{text:"Ghost Remix Documentation"}};n.Z=l},5789:function(){}},function(e){e.O(0,[64,888,774,179],function(){return e(e.s=551)}),_N_E=e.O()}]);